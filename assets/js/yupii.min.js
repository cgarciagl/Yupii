function Stack(){this.cards=[],this.push=pushdata,this.pop=popdata,this.count=countdata,this.printStack=showStackData}function pushdata(t){this.cards.push(t)}function popdata(){return this.cards.pop()}function showStackData(){return this.cards}function countdata(){return this.cards.length}function showControllerTableIn(t,e){$(t).html(getValue(e+"/tableByAjax",yupii_csrf))}function showControllerReportIn(t,e){$(t).html(getValue(e+"/reportByAjax",yupii_csrf))}var stackwidgets=new Stack,stacksearches=new Stack,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,r,i,a,o,n,s,c="",d=0;for(t=Base64._utf8_encode(t);d<t.length;)e=t.charCodeAt(d++),r=t.charCodeAt(d++),i=t.charCodeAt(d++),a=e>>2,o=(3&e)<<4|r>>4,n=(15&r)<<2|i>>6,s=63&i,isNaN(r)?n=s=64:isNaN(i)&&(s=64),c=c+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(n)+this._keyStr.charAt(s);return c},decode:function(t){var e,r,i,a,o,n,s,c="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)a=this._keyStr.indexOf(t.charAt(d++)),o=this._keyStr.indexOf(t.charAt(d++)),n=this._keyStr.indexOf(t.charAt(d++)),s=this._keyStr.indexOf(t.charAt(d++)),e=a<<2|o>>4,r=(15&o)<<4|n>>2,i=(3&n)<<6|s,c+=String.fromCharCode(e),64!=n&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(i));return c=Base64._utf8_decode(c),c},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},_utf8_decode:function(t){for(var e="",r=0,i=c1=c2=0;r<t.length;)i=t.charCodeAt(r),i<128?(e+=String.fromCharCode(i),r++):i>191&&i<224?(c2=t.charCodeAt(r+1),e+=String.fromCharCode((31&i)<<6|63&c2),r+=2):(c2=t.charCodeAt(r+1),c3=t.charCodeAt(r+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),r+=3);return e}};$.fn.YupiiSearch=function(params){return params=$.extend({controller:"",filter:""},params),this.each(function(){function searchinyupii(searched_text,forced){if(""!==searched_text||forced){var widget=this_control.closest(".yupii-widget").first(),widget_container=widget.parent();widget.hide(),stackwidgets.push(widget),stacksearches.push(this_control);for(var filtro=trim(Base64.decode(this_control.data("filter"))),elem=filtro.substring(filtro.lastIndexOf("[")+1,filtro.lastIndexOf("]"));""!=elem;)valueofelem=$("#"+elem).val(),filtro=filtro.split("["+elem+"]").join(valueofelem),elem=filtro.substring(filtro.lastIndexOf("[")+1,filtro.lastIndexOf("]"));if(0===filtro.lastIndexOf("function",0)){var f=eval("("+filtro+")");filtro=f()}filtro=Base64.encode(filtro);var obj={sSearch:searched_text,sFilter:filtro};"undefined"!=typeof yupii_csrf&&$.extend(obj,yupii_csrf);var resultado=getValue(this_control.data("controller")+"/searchByAjax",obj);widget_container.hide(),$(resultado).appendTo(widget_container),widget_container.fadeIn()}""!==searched_text||forced||this_control.next().next("input[type=hidden]").val("")}var this_control=$(this);if(this_control.data("controller",params.controller.toLowerCase()),this_control.data("filter",params.filter),!this_control.hasClass("yupiiffied")){var b=$('<span class="input-group-addon">\n                    <i class="fa fa-search"></i>\n                   </span>');b.insertAfter(this_control);var e=$('<input type="hidden" class="searchhiddenfield" \n                            name="yupii_id_'+this_control.attr("name")+'" \n                            id="yupii_id_'+this_control.attr("name")+'">');e.insertAfter(b),this_control.addClass("yupiiffied"),this_control.is("[readonly]")||(this_control.change(function(){searchinyupii(this_control.val(),!1)}),this_control.keypress(function(t){if(13==t.keyCode){t.preventDefault(!0);var e=$(this).closest("form").eq(0).find(":input:not(:hidden)"),r=e.index(this);r==e.length-1?e[0].focus():e[r+1].focus()}}),b.click(function(t){t.preventDefault(),searchinyupii("",!0)}))}}),this},$.fn.dataTableExt.oApi.fnStandingRedraw=function(t){if(!1===t.oFeatures.bServerSide){var e=t._iDisplayStart;t.oApi._fnReDraw(t),t._iDisplayStart=e,t.oApi._fnCalculateEnd(t)}t.oApi._fnDraw(t)},$.fn.dataTableExt.oApi.fnProcessingIndicator=function(t,e){void 0===e&&(e=!0),this.oApi._fnProcessingDisplay(t,e)};
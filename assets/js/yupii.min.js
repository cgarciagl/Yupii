function Stack(){this.cards=[];this.push=pushdata;this.pop=popdata;this.count=countdata;this.printStack=showStackData}function pushdata(a){this.cards.push(a)}function popdata(){return this.cards.pop()}function showStackData(){return this.cards}function countdata(){return this.cards.length}var stackwidgets=new Stack();var stacksearches=new Stack();var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(j){var m="";var d,b,g,p,c,l,k;var h=0;j=Base64._utf8_encode(j);while(h<j.length){d=j.charCodeAt(h++);b=j.charCodeAt(h++);g=j.charCodeAt(h++);p=d>>2;c=(d&3)<<4|b>>4;l=(b&15)<<2|g>>6;k=g&63;if(isNaN(b)){l=k=64}else{if(isNaN(g)){k=64}}m=m+this._keyStr.charAt(p)+this._keyStr.charAt(c)+this._keyStr.charAt(l)+this._keyStr.charAt(k)}return m},decode:function(j){var m="";var d,b,g;var p,c,l,k;var h=0;j=j.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<j.length){p=this._keyStr.indexOf(j.charAt(h++));c=this._keyStr.indexOf(j.charAt(h++));l=this._keyStr.indexOf(j.charAt(h++));k=this._keyStr.indexOf(j.charAt(h++));d=p<<2|c>>4;b=(c&15)<<4|l>>2;g=(l&3)<<6|k;m=m+String.fromCharCode(d);if(l!=64){m=m+String.fromCharCode(b)}if(k!=64){m=m+String.fromCharCode(g)}}m=Base64._utf8_decode(m);return m},_utf8_encode:function(c){c=c.replace(/\r\n/g,"\n");var a="";for(var d=0;d<c.length;d++){var b=c.charCodeAt(d);if(b<128){a+=String.fromCharCode(b)}else{if(b>127&&b<2048){a+=String.fromCharCode(b>>6|192);a+=String.fromCharCode(b&63|128)}else{a+=String.fromCharCode(b>>12|224);a+=String.fromCharCode(b>>6&63|128);a+=String.fromCharCode(b&63|128)}}}return a},_utf8_decode:function(c){var a="";var d=0;var b=c1=c2=0;while(d<c.length){b=c.charCodeAt(d);if(b<128){a+=String.fromCharCode(b);d++}else{if(b>191&&b<224){c2=c.charCodeAt(d+1);a+=String.fromCharCode((b&31)<<6|c2&63);d+=2}else{c2=c.charCodeAt(d+1);c3=c.charCodeAt(d+2);a+=String.fromCharCode((b&15)<<12|(c2&63)<<6|c3&63);d+=3}}}return a}};$.fn.YupiiSearch=function(params){params=$.extend({controller:"",filter:""},params);this.each(function(){var this_control=$(this);this_control.data("controller",params.controller.toLowerCase());this_control.data("filter",params.filter);if(!this_control.hasClass("yupiiffied")){var b=$('<span class="input-group-addon">\n                    <i class="fa fa-search"></i>\n                   </span>');b.insertAfter(this_control);var e=$('<input type="hidden" class="searchhiddenfield" \n                            name="yupii_id_'+this_control.attr("name")+'" \n                            id="yupii_id_'+this_control.attr("name")+'">');e.insertAfter(b);this_control.addClass("yupiiffied");if(!(this_control.is("[readonly]"))){this_control.change(function(){searchinyupii(this_control.val(),false)});this_control.keypress(function(e){if(e.keyCode==13){e.preventDefault(true);var inputs=$(this).parents("form").eq(0).find(":input:not(:hidden)");var idx=inputs.index(this);if(idx==inputs.length-1){inputs[0].focus()}else{inputs[idx+1].focus()}}});b.click(function(e){e.preventDefault();searchinyupii("",true)})}}function searchinyupii(searched_text,forced){if((searched_text!=="")||(forced)){var widget=this_control.parents(".yupii-widget").first();var widget_container=widget.parent();widget.hide();stackwidgets.push(widget);stacksearches.push(this_control);var filtro=trim(Base64.decode(this_control.data("filter")));var elem=filtro.substring(filtro.lastIndexOf("[")+1,filtro.lastIndexOf("]"));while(elem!=""){valueofelem=$("#"+elem).val();filtro=filtro.split("["+elem+"]").join(valueofelem);elem=filtro.substring(filtro.lastIndexOf("[")+1,filtro.lastIndexOf("]"))}if(filtro.lastIndexOf("function",0)===0){var f=eval("("+filtro+")");filtro=f()}filtro=Base64.encode(filtro);var obj={sSearch:searched_text,sFilter:filtro};if(typeof(yupii_csrf)!=="undefined"){$.extend(obj,yupii_csrf)}var resultado=getValue(this_control.data("controller")+"/searchByAjax",obj);widget_container.hide();$(resultado).appendTo(widget_container);widget_container.fadeIn()}if((searched_text==="")&&(!forced)){this_control.next().next("input[type=hidden]").val("")}}});return this};$.fn.dataTableExt.oApi.fnStandingRedraw=function(b){if(b.oFeatures.bServerSide===false){var a=b._iDisplayStart;b.oApi._fnReDraw(b);b._iDisplayStart=a;b.oApi._fnCalculateEnd(b)}b.oApi._fnDraw(b)};$.fn.dataTableExt.oApi.fnProcessingIndicator=function(b,a){if(typeof(a)=="undefined"){a=true}this.oApi._fnProcessingDisplay(b,a)};function showControllerTableIn(a,b){$(a).html(getValue(b+"/tableByAjax",yupii_csrf))}function showControllerReportIn(a,b){$(a).html(getValue(b+"/reportByAjax",yupii_csrf))};